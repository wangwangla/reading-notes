# 分析堆

- 内存溢出的原因以及解决思路
- String探讨
- 分析堆
- MAT分析

## 内存溢出的原因

内存溢出是一块内存区域的耗尽，内存溢出的原因，堆内存溢出、直接内存溢出、永久区溢出等。

### 堆溢出

堆是java程序最主要的内存空间，对象是分配在堆内存上的，因此它是最容易发生内存溢出的部分，而且发生内存溢出的都是强引用，内存使用大于Xmx设置的最大值时。

异常：

```
java heap space 
```

如何缓解，使用Xmx参数指定一个更大的堆空间，对空间不可能一只变大，对堆进行优化。

### 直接内存

java Nio支持直接内存的使用，通过java代码，获取一块对外内存空间，可以向操作系统申请。直接内存申请一般比对内存慢，访问速度块（可复用，经常被访问的空间，可以提高系统性能）

直接内存不受java控制，所以不会被回收（这么说也不准备，如果达到MaxDirectMemorySize）