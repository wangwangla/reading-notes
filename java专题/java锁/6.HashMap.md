# HashMap

数组实现   放入数组

hash冲突 数据放在链表的头部



table的初始化是在put的时候进行一次初始化



默认16   因子 0.75 



2的次方数

传入一个数字返回一个大于等于这个数字的2次方数



如何遍历2的次方数

2的次方数，他只有以为是1，其他位都不是1

​	

与操作是不存在的，他通过hash和length进行一次与运算

```java
15:		   1111
hashCode : 1011    为什么容量位2的幂次  还是和这里计算下标有关
    
但是如果只和地位有关，也会造成一些问题，造成冲突，所以可以将他们进行右移，然后在进行。
    
    
    1.8之后还会进行优化
```

有就直接将指覆盖掉，否则就创建，将节点插入，使用头插法



扩容条件

- 判断是不是达到扩容因子
- 当前位置是不是为null



扩容范围时2倍当前的坑位 

扩容，首先2倍是没有任何悬念的	获取每个数据，然后进行遍历



扩容的时候数据发生转移，转移之后的数据被掉头了，链表反转了



如果是多线程就会发生死循环



是否需要重新hash，需要使用新的table大小进行一次运算

当传入的table大小，超过了最大值才会为 true 



避免，使用的时候尽量减少扩容



key为null的地方只能存储一个值 





### hASHTable



### CurrentHashMap

默认大小16    0.75  并非级别16



put的时候先确定在segment的那个位置，然后再判断在segment的那个位置



锁的个数和并发配置有关      每个锁管理的大小和容量有关







## 1.8

链表的个数大于8，就会转换为红黑树

插入数据插入的是尾部



扩容的时候也是这样做，数据的顺序没有发生变化，也就不会发生死循环